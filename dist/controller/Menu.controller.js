sap.ui.define(["sap/ui/core/mvc/Controller","celsa/zui_comp/model/AppJsonModel","sap/ui/model/Sorter","sap/ui/model/Filter","celsa/zui_comp/utils/ExcelDownloadHelper","sap/m/MessageBox","sap/ui/model/FilterOperator"],function(e,t,i,n,o,s,a){"use strict";return e.extend("celsa.zui_comp.controller.Menu",{onInit:function(){t.initializeModel();this.mGroupFunctions={ClaseConsumo:function(e){var t=e.getProperty("ClaseConsumo");return{key:t,text:t}}}},handleViewSettingsDialogButtonPressed:function(e){if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("celsa.zui_comp.view.dialogs.TableDialog",this)}jQuery.sap.syncStyleClass("sapUiSizeCompact",this.getView(),this._oDialog);this._oDialog.open()},onSearchAsistente:function(e){var t=[];var i=e.getSource().getValue();if(i&&i.length>0){t.push(new n([new sap.ui.model.Filter("ClaseConsumo",a.Contains,i)],false))}var o=this.byId("tableVentas");var s=o.getBinding("items");s.filter(t,"Application")},handleConfirm:function(e){var t=this.getView();var o=t.byId("tableVentas");var s=e.getParameters();var a=o.getBinding("items");var r;var l;var g;var u=[];if(s.groupItem){r=s.groupItem.getKey();l=s.groupDescending;g=this.mGroupFunctions[r];u.push(new i(r,l,g))}r=s.sortItem.getKey();l=s.sortDescending;u.push(new i(r,l));a.sort(u);var d=[];jQuery.each(s.filterItems,function(e,t){var i=t.getKey().split("__");var o=i[0];var s=i[1];var a=i[2];var r=new n(o,s,a);d.push(r)});a.filter(d);this.getView().byId("vsdFilterBar").setVisible(d.length>0);this.getView().byId("vsdFilterLabel").setText(s.filterString)},onDataExport:function(e){var t=this.getView().byId("tableVentas");var i=this.getView().byId("tableVentas").getColumns();this.onExportTable(t,i)},onExportTable:function(e,t){var i=[];var n=[];for(var s=0;t.length>s;s++){i.push(t[s].getHeader().getText());if(e.getItems().length>0){if(e.getItems()[0].getCells()[s].getBinding("title")!==undefined){n.push(e.getItems()[0].getCells()[s].getBinding("title").getPath())}else if(e.getItems()[0].getCells()[s].getBinding("text")!==undefined){n.push(e.getItems()[0].getCells()[s].getBinding("text").getPath())}}}var a=this.getView().getModel("AppJsonModel").getData();o.onExport(a,i,n,e)}})});